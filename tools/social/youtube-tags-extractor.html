<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Tags Extractor - Free Online Tool</title>
    <meta name="description" content="Extract, analyze, and copy tags from any YouTube video. Get insights into trending tags and optimize your video's visibility.">
    <link href="../../styles/main.css" rel="stylesheet">
    <link href="../../styles/tool.css" rel="stylesheet">
    <link href="../../styles/social-tools-dark.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="dark-theme">
    <!-- Header Include -->
    <div include-html="../../components/header.html"></div>

    <main class="social-tool-container">
        <div class="tool-header">
            <h1><i class="fab fa-youtube"></i> YouTube Tags Extractor</h1>
            <p class="text-secondary">Extract and analyze tags from any YouTube video for better SEO optimization</p>
        </div>

        <div class="tool-content">
            <!-- URL Input Section -->
            <div class="tool-card">
                <div class="form-group">
                    <label for="videoUrl">YouTube Video URL</label>
                    <div class="input-group">
                        <input type="text" id="videoUrl" class="form-control" 
                               placeholder="https://www.youtube.com/watch?v=...">
                        <button class="btn-primary" onclick="extractTags()">
                            <i class="fas fa-search"></i> Extract Tags
                        </button>
                    </div>
                    <small class="text-secondary">Paste any YouTube video URL to analyze its tags</small>
                </div>

                <!-- Tag Categories -->                <div class="tag-categories mt-4">
                    <h4>Popular Tag Categories</h4>
                    <div class="quality-options" id="tagCategories">
                        <button class="quality-option active" data-category="all">All Tags</button>
                        <button class="quality-option" data-category="trending">Trending</button>
                        <button class="quality-option" data-category="niche">Niche</button>
                        <button class="quality-option" data-category="related">Related</button>
                        <button class="quality-option" data-category="custom">Custom</button>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results" style="display: none">
                <!-- Video Info -->
                <div class="tool-card">
                    <div class="media-preview mb-4">
                        <img id="videoThumbnail" src="" alt="Video thumbnail">
                        <div class="overlay">
                            <h3 id="videoTitle" class="text-white mb-2">-</h3>
                            <p id="videoStats" class="text-white-50">-</p>
                        </div>
                    </div>

                    <!-- Tags Display -->
                    <div class="tag-section">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h3 class="mb-0">Video Tags</h3>
                            <div class="tag-actions">
                                <button class="btn-outline" onclick="copyAllTags()">
                                    <i class="fas fa-copy"></i> Copy All
                                </button>
                                <button class="btn-outline" onclick="downloadTags()">
                                    <i class="fas fa-download"></i> Download
                                </button>
                            </div>
                        </div>

                        <!-- Tag Cloud -->
                        <div class="tag-list" id="tagCloud"></div>

                        <!-- Tag Statistics -->
                        <div class="metadata-grid mt-4">
                            <div class="metadata-item">
                                <span class="metadata-label">Total Tags</span>
                                <span class="metadata-value" id="totalTags">0</span>
                            </div>
                            <div class="metadata-item">
                                <span class="metadata-label">Popular Tags</span>
                                <span class="metadata-value" id="popularTags">0</span>
                            </div>
                            <div class="metadata-item">
                                <span class="metadata-label">Niche Tags</span>
                                <span class="metadata-value" id="nicheTags">0</span>
                            </div>
                            <div class="metadata-item">
                                <span class="metadata-label">Tag Score</span>
                                <span class="metadata-value" id="tagScore">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tag Suggestions -->
            <div class="tool-card">
                <h3>Tag Suggestions</h3>
                <p class="text-secondary">Popular and trending tags in similar categories</p>

                <div class="tag-list" id="suggestedTags">
                    <!-- Will be populated dynamically -->
                </div>

                <div class="alert alert-info mt-4">
                    <i class="fas fa-lightbulb"></i>
                    Pro Tip: Mix popular and niche-specific tags for better visibility. Aim for 10-15 relevant tags per video.
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Include -->
    <div include-html="../../components/footer.html"></div>
                                    <button type="button" class="btn btn-primary" id="fetchButton">
                                        <i class="fas fa-search"></i> Extract Tags
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Video Information Section -->
                    <div class="card mt-4" id="videoInfoCard" style="display: none;">
                        <div class="card-body">
                            <h5 class="card-title">Video Information</h5>
                            <div id="videoInfo"></div>
                        </div>
                    </div>

                    <!-- Tags Section -->
                    <div class="card mt-4" id="tagsCard" style="display: none;">
                        <div class="card-body">
                            <h5 class="card-title">Extracted Tags</h5>
                            <div id="tagsContainer"></div>
                        </div>
                    </div>

                    <!-- Tag Analysis Section -->
                    <div class="card mt-4" id="analysisCard" style="display: none;">
                        <div class="card-body">
                            <h5 class="card-title">Tag Analysis</h5>
                            <div id="analysisContainer"></div>
                        </div>
                    </div>

                    <!-- History Section -->
                    <div class="card mt-4">
                        <div class="card-body">
                            <h5 class="card-title">Recent Extractions</h5>
                            <div id="history" class="text-center text-muted">
                                No tags extracted yet
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <!-- Ad Space -->
                    <div class="ad-space mb-4">
                        <p class="text-muted">Advertisement Space</p>
                    </div>

                    <!-- Information Card -->
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">About YouTube Tags Extractor</h5>
                            <p class="card-text">
                                Extract and analyze tags from any YouTube video.
                                Get insights about video optimization and SEO.
                            </p>
                            <h6>Features:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success"></i> Tag extraction</li>
                                <li><i class="fas fa-check text-success"></i> Tag analysis</li>
                                <li><i class="fas fa-check text-success"></i> Copy to clipboard</li>
                                <li><i class="fas fa-check text-success"></i> Extraction history</li>
                                <li><i class="fas fa-check text-success"></i> SEO insights</li>
                            </ul>
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-info-circle"></i>
                                <small>Tip: Tags help improve video discoverability and SEO.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer will be loaded here -->
    <div id="footer-placeholder"></div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="/js/main.js"></script>
    <!-- Tool-specific JS -->
    <script src="../../js/main.js"></script>
    <script src="../../js/social-tools.js"></script>
    <script>
        let currentVideoId = '';
        let currentMetadata = null;
        let currentTags = [];
        let currentCategory = 'all';

        async function extractTags() {
            const urlInput = document.getElementById('videoUrl');
            const url = urlInput.value.trim();

            if (!socialTools.videoInfo.validateUrl(url, 'youtube')) {
                socialTools.showToast('Please enter a valid YouTube URL', 'error');
                return;
            }

            try {
                currentVideoId = socialTools.videoInfo.extractVideoId(url, 'youtube');
                if (!currentVideoId) throw new Error('Could not extract video ID');

                // Show loading state
                document.getElementById('results').style.display = 'none';
                socialTools.showToast('Analyzing video tags...', 'info');

                // Get video metadata
                currentMetadata = await socialTools.youtube.getVideoMetadata(currentVideoId);
                currentTags = currentMetadata.tags || [];
                
                // Update UI
                updateVideoInfo();
                updateTagCloud();
                updateTagStats();
                generateSuggestions();
                
                document.getElementById('results').style.display = 'block';
                socialTools.showToast('Tags extracted successfully!', 'success');
            } catch (err) {
                socialTools.showToast('Failed to extract tags: ' + err.message, 'error');
            }
        }

        function updateVideoInfo() {
            if (!currentMetadata) return;

            document.getElementById('videoThumbnail').src = currentMetadata.thumbnails.high;
            document.getElementById('videoTitle').textContent = currentMetadata.title;
            document.getElementById('videoStats').textContent = `${currentTags.length} tags found`;
        }

        function updateTagCloud() {
            const tagCloud = document.getElementById('tagCloud');
            tagCloud.innerHTML = '';

            const tagsToShow = currentCategory === 'all' ? currentTags : 
                             filterTagsByCategory(currentTags, currentCategory);

            tagsToShow.forEach(tag => {
                const tagEl = document.createElement('div');
                tagEl.className = 'tag-item';
                tagEl.innerHTML = `
                    <span>${tag}</span>
                    <i class="fas fa-copy remove-tag" onclick="copyTag('${tag}')"></i>
                `;
                tagCloud.appendChild(tagEl);
            });
        }

        function updateTagStats() {
            const total = currentTags.length;
            const popular = currentTags.filter(tag => isPopularTag(tag)).length;
            const niche = total - popular;
            const score = calculateTagScore(currentTags);

            document.getElementById('totalTags').textContent = total;
            document.getElementById('popularTags').textContent = popular;
            document.getElementById('nicheTags').textContent = niche;
            document.getElementById('tagScore').textContent = score + '%';
        }

        function generateSuggestions() {
            const suggestions = getTagSuggestions(currentTags);
            const suggestedTags = document.getElementById('suggestedTags');
            suggestedTags.innerHTML = '';

            suggestions.forEach(tag => {
                const tagEl = document.createElement('div');
                tagEl.className = 'tag-item';
                tagEl.innerHTML = `
                    <span>${tag}</span>
                    <i class="fas fa-plus remove-tag" onclick="addTag('${tag}')"></i>
                `;
                suggestedTags.appendChild(tagEl);
            });
        }

        function isPopularTag(tag) {
            // This would need real data, using mock implementation
            const popularKeywords = ['tutorial', 'how to', 'guide', 'tips', 'review'];
            return popularKeywords.some(keyword => tag.toLowerCase().includes(keyword));
        }

        function calculateTagScore(tags) {
            // Mock scoring algorithm
            const hasOptimalCount = tags.length >= 10 && tags.length <= 15;
            const hasPopularTags = tags.some(tag => isPopularTag(tag));
            const hasNicheTags = tags.some(tag => !isPopularTag(tag));
            
            let score = 0;
            if (hasOptimalCount) score += 40;
            if (hasPopularTags) score += 30;
            if (hasNicheTags) score += 30;
            
            return score;
        }

        function getTagSuggestions(currentTags) {
            // This would need to be connected to a real tag suggestion API
            return [
                'youtube tips 2025',
                'content creation',
                'video optimization',
                'social media strategy',
                'youtube algorithm',
                'viral content tips'
            ];
        }

        async function copyTag(tag) {
            await socialTools.copyToClipboard(tag);
        }

        async function copyAllTags() {
            const tags = currentCategory === 'all' ? currentTags : 
                        filterTagsByCategory(currentTags, currentCategory);
            await socialTools.copyToClipboard(tags.join(', '));
        }

        function downloadTags() {
            const tags = currentCategory === 'all' ? currentTags : 
                        filterTagsByCategory(currentTags, currentCategory);
            const content = tags.join('\n');
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'youtube-tags.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            socialTools.showToast('Tags downloaded successfully!', 'success');
        }

        function filterTagsByCategory(tags, category) {
            switch (category) {
                case 'trending':
                    return tags.filter(tag => isPopularTag(tag));
                case 'niche':
                    return tags.filter(tag => !isPopularTag(tag));
                case 'related':
                    return getRelatedTags(tags);
                case 'custom':
                    return getCustomTags(tags);
                default:
                    return tags;
            }
        }

        function getRelatedTags(tags) {
            // This would need to be connected to a real related tags API
            return tags.slice(0, 5);
        }

        function getCustomTags(tags) {
            // This would need user preferences/custom tags implementation
            return tags.filter(tag => tag.startsWith('#'));
        }

        // Handle category selection
        document.getElementById('tagCategories').addEventListener('click', (e) => {
            if (!e.target.classList.contains('quality-option')) return;
            
            // Update active state
            document.querySelectorAll('.quality-option').forEach(btn => 
                btn.classList.remove('active'));
            e.target.classList.add('active');
            
            // Update category and refresh tag cloud
            currentCategory = e.target.dataset.category;
            updateTagCloud();
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            includeHTML();
        });
    </script>
</body>
</html>