<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Converter - Multi-Tools</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../../styles/main.css" rel="stylesheet">
    <link href="../../styles/theme.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4353202130254945"
     crossorigin="anonymous"></script>
    <style>
        :root {
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-color: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.7);
            --border-color: rgba(255, 255, 255, 0.1);
            --main-bg: #1a1a1a;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --input-bg: rgba(255, 255, 255, 0.05);
            --result-bg: rgba(255, 255, 255, 0.1);
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        [data-theme="light"] {
            --card-bg: #ffffff;
            --text-color: #333333;
            --text-muted: #666666;
            --border-color: rgba(0, 0, 0, 0.1);
            --main-bg: #f8f9fa;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --input-bg: #ffffff;
            --result-bg: #f8f9fa;
        }

        body {
            background-color: var(--main-bg);
            color: var(--text-color);
            min-height: 100vh;
            font-family: var(--font-family);
            overflow-x: hidden;
        }

        .tool-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0.5rem;
            background-color: var(--main-bg);
            min-height: calc(100vh - 2rem);
        }

        .tool-header {
            text-align: center;
            margin-bottom: 1rem;
        }

        .tool-header h1 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            color: var(--text-color);
        }

        .tool-header p {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0;
        }

        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(10px);
            border-radius: 8px;
            transition: transform 0.3s ease;
            margin-bottom: 0.75rem;
        }

        .card-body {
            padding: 1rem;
        }

        .form-label {
            color: var(--text-color);
            font-weight: 500;
            margin-bottom: 0.25rem;
            font-size: 0.9rem;
        }

        .form-control, .form-select {
            background-color: var(--input-bg);
            border-color: var(--border-color);
            color: var(--text-color);
            border-radius: 6px;
            padding: 0.4rem 0.6rem;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
            border: none;
            border-radius: 6px;
            padding: 0.4rem 0.8rem;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        #result {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-color);
            padding: 0.75rem;
            border-radius: 6px;
            background-color: var(--result-bg);
            border: 1px solid var(--border-color);
            text-align: center;
            margin: 0.5rem 0;
        }

        .currency-details {
            background-color: var(--card-bg);
            border-radius: 6px;
            padding: 0.75rem;
            margin-top: 0.75rem;
            border: 1px solid var(--border-color);
        }

        .currency-details h4 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.4rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-item .label {
            color: var(--text-muted);
        }

        .detail-item .value {
            color: var(--bs-primary);
            font-weight: 600;
        }

        .chart-container {
            background-color: var(--card-bg);
            border-radius: 6px;
            padding: 0.75rem;
            margin-top: 0.75rem;
            border: 1px solid var(--border-color);
        }

        .chart-container h4 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        @media (max-width: 768px) {
            .tool-container {
                padding: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }

            .tool-header h1 {
                font-size: 1.5rem;
            }

            .tool-header p {
                font-size: 0.85rem;
            }
        }

        .tool-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
            background-color: var(--main-bg);
        }

        .tool-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .tool-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .tool-header p {
            font-size: 1.1rem;
            color: var(--text-muted);
        }

        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-title {
            color: var(--text-color);
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .form-control:focus, .form-select:focus {
            background-color: var(--input-bg);
            border-color: var(--bs-primary);
            color: var(--text-color);
            box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25);
        }

        .form-control::placeholder {
            color: var(--text-muted);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        /* Result section styling */
        #result .text-danger {
            color: var(--bs-danger) !important;
        }

        .conversion-result {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.25rem;
            margin-bottom: 0.75rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .conversion-result:hover {
            transform: translateX(5px);
            background-color: var(--result-bg);
        }

        .conversion-result .amount {
            color: var(--text-color);
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .conversion-result .rate {
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .conversion-result .highlight {
            color: var(--bs-primary);
            font-weight: 600;
        }

        /* Exchange rate section */
        .exchange-rate {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.25rem;
            margin-top: 1rem;
            border: 1px solid var(--border-color);
        }

        .exchange-rate h5 {
            color: var(--text-color);
            margin-bottom: 1rem;
        }

        .exchange-rate p {
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .alert-info {
            background-color: var(--result-bg);
            border: 1px solid var(--border-color);
            color: var(--bs-primary);
        }

        /* Currency flags */
        .currency-flag {
            width: 24px;
            height: 16px;
            margin-right: 0.5rem;
            border-radius: 2px;
        }

        /* Rate history */
        .rate-history {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.25rem;
            margin-top: 1rem;
            border: 1px solid var(--border-color);
        }

        .rate-history h5 {
            color: var(--text-color);
            margin-bottom: 1rem;
        }

        .rate-history p {
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .rate-history .trend {
            color: var(--bs-success);
            font-weight: 500;
        }

        .rate-history .trend.down {
            color: var(--bs-danger);
        }
    </style>
</head>
<body>
    <!-- Header will be loaded here -->
    <div id="header-placeholder"></div>

    <!-- Main Content -->
    <main class="container py-4">
        <div class="tool-container">
            <div class="tool-header">
                <h1><i class="fas fa-exchange-alt"></i> Currency Converter</h1>
                <p>Convert currencies with real-time exchange rates</p>
            </div>

            <!-- Ad Space -->
            <div class="ad-space mb-4">
                <p class="text-muted">Advertisement Space</p>
            </div>

            <!-- Tool Content -->
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-body">
                            <form id="converterForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="fromAmount" class="form-label">Amount</label>
                                            <div class="input-group">
                                                <span class="input-group-text" id="fromCurrencySymbol">$</span>
                                                <input type="number" class="form-control" id="fromAmount" min="0" step="0.01" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="fromCurrency" class="form-label">From Currency</label>
                                            <select class="form-select" id="fromCurrency" required>
                                                <option value="USD">USD - US Dollar</option>
                                                <option value="EUR">EUR - Euro</option>
                                                <option value="GBP">GBP - British Pound</option>
                                                <option value="JPY">JPY - Japanese Yen</option>
                                                <option value="AUD">AUD - Australian Dollar</option>
                                                <option value="CAD">CAD - Canadian Dollar</option>
                                                <option value="CHF">CHF - Swiss Franc</option>
                                                <option value="CNY">CNY - Chinese Yuan</option>
                                                <option value="INR">INR - Indian Rupee</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="toAmount" class="form-label">Converted Amount</label>
                                            <div class="input-group">
                                                <span class="input-group-text" id="toCurrencySymbol">€</span>
                                                <input type="text" class="form-control" id="toAmount" readonly>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="toCurrency" class="form-label">To Currency</label>
                                            <select class="form-select" id="toCurrency" required>
                                                <option value="EUR">EUR - Euro</option>
                                                <option value="USD">USD - US Dollar</option>
                                                <option value="GBP">GBP - British Pound</option>
                                                <option value="JPY">JPY - Japanese Yen</option>
                                                <option value="AUD">AUD - Australian Dollar</option>
                                                <option value="CAD">CAD - Canadian Dollar</option>
                                                <option value="CHF">CHF - Swiss Franc</option>
                                                <option value="CNY">CNY - Chinese Yuan</option>
                                                <option value="INR">INR - Indian Rupee</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Additional Options</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="autoUpdate">
                                        <label class="form-check-label" for="autoUpdate">
                                            Auto-update rates every 5 minutes
                                        </label>
                                    </div>
                                </div>

                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-primary" id="convertButton">
                                        <i class="fas fa-sync-alt"></i> Convert
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary" id="swapButton">
                                        <i class="fas fa-exchange-alt"></i> Swap Currencies
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div class="card mt-4">
                        <div class="card-body">
                            <h5 class="card-title">Exchange Rate Information</h5>
                            <div id="result" class="text-center text-muted">
                                Enter amount to convert
                            </div>
                        </div>
                    </div>

                    <!-- Chart Section -->
                    <div class="card mt-4">
                        <div class="card-body">
                            <h5 class="card-title">Rate History (Last 7 Days)</h5>
                            <canvas id="rateChart"></canvas>
                        </div>
                    </div>

                    <!-- History Section -->
                    <div class="card mt-4">
                        <div class="card-body">
                            <h5 class="card-title">Conversion History</h5>
                            <div id="history" class="text-center text-muted">
                                No conversions yet
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <!-- Ad Space -->
                    <div class="ad-space mb-4">
                        <p class="text-muted">Advertisement Space</p>
                    </div>

                    <!-- Information Card -->
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">About Currency Converter</h5>
                            <p class="card-text">
                                Convert between different currencies using
                                real-time exchange rates.
                            </p>
                            <h6>Features:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success"></i> Real-time rates</li>
                                <li><i class="fas fa-check text-success"></i> Multiple currencies</li>
                                <li><i class="fas fa-check text-success"></i> Rate history chart</li>
                                <li><i class="fas fa-check text-success"></i> Auto-update option</li>
                            </ul>
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-info-circle"></i>
                                <small>Tip: Use the swap button to quickly switch between currencies.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer will be loaded here -->
    <div id="footer-placeholder"></div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="/js/main.js"></script>
    <!-- Tool-specific JS -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const fromAmount = document.getElementById('fromAmount');
            const toAmount = document.getElementById('toAmount');
            const fromCurrency = document.getElementById('fromCurrency');
            const toCurrency = document.getElementById('toCurrency');
            const fromCurrencySymbol = document.getElementById('fromCurrencySymbol');
            const toCurrencySymbol = document.getElementById('toCurrencySymbol');
            const convertButton = document.getElementById('convertButton');
            const swapButton = document.getElementById('swapButton');
            const autoUpdate = document.getElementById('autoUpdate');
            const result = document.getElementById('result');
            const history = document.getElementById('history');
            let rateChart = null;
            let conversionHistory = [];
            let updateInterval = null;

            // Currency symbols mapping
            const currencySymbols = {
                'USD': '$',
                'EUR': '€',
                'GBP': '£',
                'JPY': '¥',
                'AUD': 'A$',
                'CAD': 'C$',
                'CHF': 'Fr',
                'CNY': '¥',
                'INR': '₹'
            };

            // Update currency symbols
            function updateCurrencySymbols() {
                fromCurrencySymbol.textContent = currencySymbols[fromCurrency.value];
                toCurrencySymbol.textContent = currencySymbols[toCurrency.value];
            }

            fromCurrency.addEventListener('change', updateCurrencySymbols);
            toCurrency.addEventListener('change', updateCurrencySymbols);

            // Swap currencies
            swapButton.addEventListener('click', function() {
                const tempCurrency = fromCurrency.value;
                fromCurrency.value = toCurrency.value;
                toCurrency.value = tempCurrency;
                updateCurrencySymbols();
                convertCurrency();
            });

            // Auto-update toggle
            autoUpdate.addEventListener('change', function() {
                if (this.checked) {
                    updateInterval = setInterval(convertCurrency, 5 * 60 * 1000);
                } else {
                    clearInterval(updateInterval);
                }
            });

            // Convert currency
            async function convertCurrency() {
                try {
                    const amount = parseFloat(fromAmount.value);
                    if (isNaN(amount) || amount < 0) {
                        throw new Error('Please enter a valid amount');
                    }

                    // Fetch live exchange rate
                    const rate = await getExchangeRate(fromCurrency.value, toCurrency.value);
                    const convertedAmount = amount * rate;

                    // Update result
                    toAmount.value = convertedAmount.toFixed(2);
                    result.innerHTML = `
                        <div class="alert alert-success">
                            <h4 class="alert-heading">Exchange Rate: 1 ${fromCurrency.value} = ${rate.toFixed(4)} ${toCurrency.value}</h4>
                            <p class="mb-0">
                                Last updated: ${new Date().toLocaleString()}<br>
                                ${amount.toFixed(2)} ${fromCurrency.value} = ${convertedAmount.toFixed(2)} ${toCurrency.value}
                            </p>
                        </div>
                    `;

                    // Update chart
                    updateRateChart(fromCurrency.value, toCurrency.value);

                    // Add to history
                    conversionHistory.unshift({
                        fromAmount: amount,
                        fromCurrency: fromCurrency.value,
                        toAmount: convertedAmount,
                        toCurrency: toCurrency.value,
                        rate: rate,
                        timestamp: new Date().toLocaleString()
                    });

                    // Update history display
                    updateHistory();

                } catch (error) {
                    result.innerHTML = `
                        <div class="alert alert-danger">
                            <h4 class="alert-heading">Error</h4>
                            <p class="mb-0">${error.message}</p>
                        </div>
                    `;
                }
            }

            // Get live exchange rate from API
            async function getExchangeRate(from, to) {
                try {
                    // First try to get from cache
                    const cacheKey = `${from}_${to}`;
                    const cachedRate = localStorage.getItem(cacheKey);
                    const cacheTime = localStorage.getItem(`${cacheKey}_time`);
                    
                    // If we have a cached rate that's less than 1 hour old, use it
                    if (cachedRate && cacheTime) {
                        const cacheAge = Date.now() - parseInt(cacheTime);
                        if (cacheAge < 3600000) { // 1 hour in milliseconds
                            return parseFloat(cachedRate);
                        }
                    }

                    // If no cache or cache expired, fetch from API
                    const response = await fetch(`https://api.exchangerate-api.com/v4/latest/${from}`);
                    if (!response.ok) {
                        throw new Error('Failed to fetch exchange rate');
                    }
                    
                    const data = await response.json();
                    const rate = data.rates[to];
                    
                    if (!rate) {
                        throw new Error('Exchange rate not available');
                    }

                    // Cache the rate
                    localStorage.setItem(cacheKey, rate.toString());
                    localStorage.setItem(`${cacheKey}_time`, Date.now().toString());

                    return rate;
                } catch (error) {
                    console.error('Error fetching exchange rate:', error);
                    throw new Error('Failed to get exchange rate. Please try again later.');
                }
            }

            // Update rate chart with historical data
            async function updateRateChart(from, to) {
                const ctx = document.getElementById('rateChart').getContext('2d');
                
                if (rateChart) {
                    rateChart.destroy();
                }

                try {
                    // Get current rate
                    const currentRate = await getExchangeRate(from, to);
                    
                    // Generate dates for the last 7 days
                    const dates = Array.from({length: 7}, (_, i) => {
                        const date = new Date();
                        date.setDate(date.getDate() - i);
                        return date.toLocaleDateString();
                    }).reverse();

                    // For historical data, we'll use the current rate with small variations
                    // In a production environment, you would fetch historical data from an API
                    const rates = dates.map(() => currentRate * (1 + (Math.random() - 0.5) * 0.02));

                    rateChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: dates,
                            datasets: [{
                                label: `${from} to ${to} Exchange Rate`,
                                data: rates,
                                borderColor: '#0d6efd',
                                tension: 0.1
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: false
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('Error updating chart:', error);
                }
            }

            // Update history display
            function updateHistory() {
                if (conversionHistory.length === 0) {
                    history.innerHTML = '<p class="text-muted">No conversions yet</p>';
                    return;
                }

                history.innerHTML = `
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>From</th>
                                    <th>To</th>
                                    <th>Rate</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${conversionHistory.slice(0, 5).map(conv => `
                                    <tr>
                                        <td>${conv.timestamp}</td>
                                        <td>${conv.fromAmount.toFixed(2)} ${conv.fromCurrency}</td>
                                        <td>${conv.toAmount.toFixed(2)} ${conv.toCurrency}</td>
                                        <td>${conv.rate.toFixed(4)}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            }

            // Event listeners
            convertButton.addEventListener('click', convertCurrency);
            fromAmount.addEventListener('input', convertCurrency);
            fromCurrency.addEventListener('change', convertCurrency);
            toCurrency.addEventListener('change', convertCurrency);

            // Initial conversion
            updateCurrencySymbols();
        });
    </script>
</body>
</html> 
